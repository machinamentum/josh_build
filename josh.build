

int main() {
    {
        JBExecutable josh = {"embed"};
        josh.sources = (const char *[]){"src/embed.c", NULL};
        josh.build_folder = "build";
        josh.cflags = (const char *[]){ "-Wall", NULL };
        jb_build(&josh);

        JB_RUN_CMD("./build/embed", "src/josh_build.h", "src/josh_build_embed.h");
        JB_RUN_CMD("./build/embed", "src/init_josh_build.c", "src/init_josh_build_embed.h");
        JB_RUN_CMD("./build/embed", "src/init_src_main.c", "src/init_src_main_embed.h");

        remove("./build/embed");
    }

    {
        JBExecutable josh = {"josh"};
        josh.sources = (const char *[]){"src/main.c", NULL};
        josh.build_folder = "build";
        jb_build(&josh);
    }

    remove("src/josh_build_embed.h");
    remove("src/init_josh_build_embed.h");
    remove("src/init_src_main_embed.h");
}
